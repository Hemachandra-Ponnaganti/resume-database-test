<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Resume Database</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 20px;
}
h2 {
  margin-bottom: 10px;
}
.filters {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 10px;
  margin-bottom: 15px;
}
input, select {
  padding: 6px;
  width: 100%;
}
.card {
  border: 1px solid #ddd;
  padding: 12px;
  margin: 10px 0;
  border-radius: 6px;
}
.role {
  font-weight: bold;
  color: #0b5ed7;
}
.skills span {
  background: #eef;
  padding: 3px 6px;
  margin: 2px;
  display: inline-block;
  border-radius: 4px;
  font-size: 12px;
}
</style>
</head>

<body>

<h2>üìÑ Resume Database</h2>

<!-- Filters -->
<div class="filters">
  <select id="roleFilter">
    <option value="">All Roles</option>
  </select>

  <input type="text" id="skillFilter" placeholder="Skill (e.g. React, SEO)">

  <input type="text" id="experienceFilter" placeholder="Experience (e.g. 3 years)">

  <input type="text" id="qualificationFilter" placeholder="Qualification (e.g. B.Tech, MBA)">
</div>

<div id="results"></div>

<script>
let resumes = [];

fetch('data/resumes.json')
  .then(res => res.json())
  .then(data => {
    resumes = data;
    populateRoles(data);
    render(data);
  });

function populateRoles(data) {
  const roles = [...new Set(data.map(r => r.role))];
  const select = document.getElementById('roleFilter');

  roles.forEach(role => {
    const option = document.createElement('option');
    option.value = role;
    option.textContent = role;
    select.appendChild(option);
  });
}

function render(data) {
  const container = document.getElementById('results');
  container.innerHTML = "";

  if (data.length === 0) {
    container.innerHTML = "<p>No resumes found.</p>";
    return;
  }

  data.forEach(r => {
    const div = document.createElement('div');
    div.className = "card";

    div.innerHTML = `
      <div class="role">${r.role}</div>
      <b>${r.name}</b><br>
      üìß ${r.email}<br>
      üéì ${r.qualification}<br>
      ‚è≥ Experience: ${r.experience}<br>

      <div class="skills">
        ${r.skills.map(s => `<span>${s}</span>`).join("")}
      </div>

      <br>
      <a href="${r.file}" target="_blank">üìé View Resume</a>
    `;

    container.appendChild(div);
  });
}

function applyFilters() {
  const role = document.getElementById('roleFilter').value.trim().toLowerCase();
  const skill = document.getElementById('skillFilter').value.trim().toLowerCase();
  const experience = document.getElementById('experienceFilter').value.trim().toLowerCase();
  const qualification = document.getElementById('qualificationFilter').value.trim().toLowerCase();

  const filtered = resumes.filter(r => {
    const rRole = (r.role || "").toLowerCase();
    const rSkills = Array.isArray(r.skills)
      ? r.skills.join(" ").toLowerCase()
      : "";
    const rExp = (r.experience || "").toLowerCase();
    const rQual = (r.qualification || "").toLowerCase();

    // AND logic: every filled field must match
    if (role && !rRole.includes(role)) return false;
    if (skill && !rSkills.includes(skill)) return false;
    if (experience && !rExp.includes(experience)) return false;
    if (qualification && !rQual.includes(qualification)) return false;

    return true;
  });

  render(filtered);
}



// Attach listeners
document.getElementById('roleFilter').addEventListener('change', applyFilters);
document.getElementById('skillFilter').addEventListener('input', applyFilters);
document.getElementById('experienceFilter').addEventListener('input', applyFilters);
document.getElementById('qualificationFilter').addEventListener('input', applyFilters);
</script>

</body>
</html>
